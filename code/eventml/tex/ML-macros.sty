%------------------------------------------------------------------------------+
%                                                                              |
%     File: Reports/2002-NuprlManual/xx-classic-ml-macros.sty                  |
%                                                                              |
%     Macros for the Manual on Classic ML                                      |
%                                                                              |
%     Author: Christoph Kreitz                                                 |
%     Date: 04/28/00                                                           |
%     Last Update: 08/10/11                                                    |
%                                                                              |
%------------------------------------------------------------------------------+


\newcommand{\tightlines}      {\renewcommand{\baselinestretch}{0.8}}
\newcommand{\narrowlines}     {\renewcommand{\baselinestretch}{0.9}}
\newcommand{\Narrowlines}     {\renewcommand{\baselinestretch}{0.95}}
\newcommand{\stdlines}        {\renewcommand{\baselinestretch}{1.0}}

% ------------------------------------------------------------------------------
% Using Colors for specific purposes
% ------------------------------------------------------------------------------

\newcommand{\NOTION}[1]       {{\Red{#1}}}
\newcommand{\Em}[1]           {{\Blue{#1}}}
% ------------------------------------------------------------------------------
% Typewriter environment
% ------------------------------------------------------------------------------

\newcommand{\typewriter}
         {\small\tt\frenchspacing\obeyspaces\obeylines\setlength{\parskip}{0mm}}

\newcommand{\bt}      	      {\vspace*{2mm}\begingroup\Narrowlines\typewriter}
\newcommand{\bttight} 	      {\vspace*{2mm}\begingroup\tightlines\typewriter}
\newcommand{\et}      	      {\stdlines\endgroup\vspace*{1mm}}
\newcommand{\e}       	      {\noindent\hspace*{0mm}}

% ------------------------------------------------------------------------------
% Keywords and special symbols
% ------------------------------------------------------------------------------

\newcommand{\Nuprl}	{{\sc Nuprl}}
\newcommand{\HOL}	{{\sc HOL}}
\newcommand{\COQ}	{{\sc Coq}}
\newcommand{\LCF}	{{\sc LCF}}
\newcommand{\ML}	{{\sc ML}}
\newcommand{\OCAML}	{{\sc OCaml}}
\newcommand{\FSHARP}	{{\sc F\#}}
\newcommand{\CML}	{{\sc Classic ML}}
\newcommand{\EML}	{{\sc EventML}}
\newcommand{\Emacs}	{{\sc Emacs}}
\newcommand{\SML}	{{\sc SML}}
\newcommand{\RET}{\raisebox{-0.7mm}{\,\scriptsize\boldmath$\leftarrow$\hspace*{-0.7mm}\raisebox{1.1mm}{\boldmath\(\scriptscriptstyle|\)}}\,}


\newcommand{\subone} {\mbox{\(_{_1}\!\)}}
\newcommand{\subtwo} {\mbox{\(_{_2}\!\)}}
\newcommand{\subn}   {\mbox{\(_{_n}\!\)}}
\newcommand{\all}    {\mbox{\({\forall}\)}}
\newcommand{\bs}     {\mbox{\(\backslash\)}}

\newcommand{\hidden}[1]{}


% ------------------------------------------------------------------------------
% Quotet typewriter text
% ------------------------------------------------------------------------------

\newcommand{\ttq}[1]{\Em{\mbox{$_\llcorner\!${\tt#1}$\!_\lrcorner$}}}
\newcommand{\ttQ}[1]{\e\Em{\mbox{{\tt#1}}}}
\newcommand{\TTD}[1]{\NOTION{\mbox{\tt{#1}}}}



% ----------------------------------------------------------------------------
% Macros for little ML sessions displayed in boxes with a session counter
%
% Usage: (1) \setcounter{sessioncount}{1} resets the session counter
%
%        (2) \begin{session}\begin{verbatim}
%             .
%              < lines from hol session >
%             .
%            \end{verbatim}\end{session}
%
%            typesets the session in a numbered box.
% ----------------------------------------------------------------------------

\newlength{\hsbw}
\setlength{\hsbw}{0.86\textwidth}
\addtolength{\hsbw}{-\arrayrulewidth}
\addtolength{\hsbw}{-\tabcolsep}
\newcommand\HOLSpacing{11pt}

\newcounter{sessioncount}
\setcounter{sessioncount}{1}

\newenvironment{session}{\begin{flushleft}
 \vspace*{-2.5pt}
 \hspace*{0.07\textwidth}\begin{tabular}{@{}|c@{}|@{}}\hline
 \begin{minipage}[b]{\hsbw}
 \vspace*{-.5pt}
 \begin{flushright}
 \rule{0.01in}{.15in}\rule{0.3in}{0.01in}\hspace{-0.35in}
 \raisebox{0.04in}{\makebox[0.3in][c]{\footnotesize\sl \thesessioncount}}
 \end{flushright}
 \vspace*{-.5in}
 \begingroup\small\baselineskip\HOLSpacing}
 {\endgroup\end{minipage}\\
 \hline
 \end{tabular}
 \vspace*{-2.5pt}
 \end{flushleft}
 \stepcounter{sessioncount}}

\newenvironment{emlerror}{\begin{flushleft}
 \vspace*{-2.5pt}
 \hspace*{0.07\textwidth}\begin{tabular}{@{}|c@{}|@{}}\hline
 \begin{minipage}[b]{\hsbw}
 \vspace*{-.5pt}
 \begin{flushright}
 \end{flushright}
 \vspace*{-.35in}
 \begingroup\small\baselineskip\HOLSpacing}
 {\endgroup\end{minipage}\\
 \hline
 \end{tabular}
 \vspace*{-2.5pt}
 \end{flushleft}}

\newcommand{\emlsession}{
  \vspace*{0.175in}
  \begin{tabular}{ p{3in} | @{\hspace*{0.02in}} | p{3in}}
  \vspace*{-0.2in}
}

\newcommand{\emlfile}{\vspace*{-0.3in}&\vspace*{-0.2in}}

\newcommand{\emlend}{\vspace*{-0.3in}\end{tabular}}


% ---------------------------------------------------------------------
% Macro for boxed ML functions, etc.
%
% Usage: (1) \begin{boxed}\begin{verbatim}
%               .
%               < lines giving names and types of mk functions >
%               .
%            \end{verbatim}\end{boxed}
%
%            typesets the given lines in a box.
%
%            Conventions: lines are left-aligned under the "g" of begin,
%            and used to highlight primary reference for the ml function(s)
%            that appear in the box.
% ---------------------------------------------------------------------

\newenvironment{boxed}{\begin{flushleft}
 \hspace*{0.07\textwidth}\begin{tabular}{@{}|c@{}|@{}}\hline
 \begin{minipage}[b]{\hsbw}
 \vspace*{.06in}
 \begingroup\small\baselineskip\HOLSpacing}{\endgroup\end{minipage}\\ \hline
 \end{tabular}
 \end{flushleft}}
